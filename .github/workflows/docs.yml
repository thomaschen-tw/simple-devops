# æ–‡æ¡£æ›´æ–°å·¥ä½œæµ
# åªæ›´æ–°æ–‡æ¡£ï¼ˆ.md æ–‡ä»¶ï¼‰æ—¶ï¼Œä¸è§¦å‘å‰åç«¯æ„å»ºï¼ŒèŠ‚çœ CI èµ„æº

name: docs-ci

# è§¦å‘æ¡ä»¶ï¼šåªç›‘å¬æ–‡æ¡£æ–‡ä»¶å˜æ›´
on:
  push:
    paths:
      - "*.md"              # æ ¹ç›®å½•çš„ markdown æ–‡ä»¶
      - "**/*.md"           # æ‰€æœ‰å­ç›®å½•çš„ markdown æ–‡ä»¶
      - "docs/**"           # docs ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
      - ".github/workflows/docs.yml"
    branches: ["main", "master"]
  pull_request:
    paths:
      - "*.md"
      - "**/*.md"
      - "docs/**"
      - ".github/workflows/docs.yml"

jobs:
  # ç®€å•çš„æ–‡æ¡£æ£€æŸ¥ä»»åŠ¡
  check-docs:
    runs-on: ubuntu-latest
    
    steps:
      # æ‹‰å–ä»£ç 
      - uses: actions/checkout@v4
      
      # æ£€æŸ¥ markdown æ–‡ä»¶
      - name: Check markdown files
        run: |
          echo "ğŸ“ æ–‡æ¡£æ–‡ä»¶å·²æ›´æ–°ï¼Œè·³è¿‡å‰åç«¯æ„å»º"
          echo "æ›´æ–°çš„æ–‡æ¡£æ–‡ä»¶ï¼š"
          # æ˜¾ç¤ºå˜æ›´çš„æ–‡æ¡£æ–‡ä»¶åˆ—è¡¨
          git diff --name-only ${{ github.event.before }} ${{ github.sha }} | grep -E '\.(md|MD)$' || echo "æ— æ–‡æ¡£æ–‡ä»¶å˜æ›´"
      
      # æ˜¾ç¤ºæ€»ç»“ä¿¡æ¯
      - name: Documentation summary
        run: |
          echo "âœ… æ–‡æ¡£æ›´æ–°å®Œæˆ"
          echo "â„¹ï¸  åªæ›´æ–°æ–‡æ¡£æ—¶ä¸ä¼šè§¦å‘å‰åç«¯é•œåƒæ„å»ºï¼ŒèŠ‚çœ CI èµ„æº"
